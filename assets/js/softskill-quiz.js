const questions = {
  'Communication': [
      {
        question: 'How do you handle communication challenges when working with individuals from diverse cultural backgrounds?',
        answer: 'I proactively educate myself about different cultural norms, listen attentively, and adjust my communication style to bridge potential gaps.'
      },
      {
        question: 'Can you provide an example of a time when you had to communicate a complex idea to a non-technical audience?',
        answer: 'Certainly, in a previous project, I had to explain intricate technical details to a group of stakeholders. I used analogies and simplified language to ensure understanding.'
      },
      {
        question: 'How do you use non-verbal communication to enhance your message?',
        answer: 'I pay attention to my body language, facial expressions, and gestures to complement my verbal communication. This helps convey additional nuances and emotions.'
      },
      {
        question: 'What strategies do you employ to ensure effective communication in a remote work environment?',
        answer: 'In a remote setting, I prioritize clear written communication, utilize video calls for important discussions, and regularly check in with team members to maintain open lines of communication.'
      },
      {
        question: 'How do you tailor your communication when working with individuals who have different communication styles?',
        answer: 'I adapt by observing their preferred communication style, whether its more formal, casual, direct, or indirect, and adjust my approach to build effective communication.'
      }
    ],

    'Team Collaboration': [
      {
        question: 'Describe a situation where you had to resolve a conflict within your team. How did you approach it?',
        answer: 'In a past project, there was a disagreement between team members. I facilitated a team discussion, identified the root causes, and worked collaboratively to find a resolution that satisfied all parties.'
      },
      {
        question: 'How do you foster a sense of inclusivity within your team?',
        answer: 'I actively seek input from all team members during discussions, encourage diverse perspectives, and ensure that everyone feels valued and included in decision-making processes.'
      },
      {
        question: 'Can you provide an example of a successful collaborative project youve been a part of?',
        answer: 'Certainly, in a previous project, our team successfully collaborated on a complex task by leveraging each member\'s strengths, maintaining open communication, and sharing responsibilities.'
      },
      {
        question: 'How do you handle situations where team members have conflicting priorities?',
        answer: 'I facilitate a discussion to understand each team members priorities, explore potential compromises, and work together to find a solution that aligns with the overall goals of the team.'
      },
      {
        question: 'What steps do you take to ensure effective communication within a geographically dispersed team?',
        answer: 'I utilize various communication tools, schedule regular virtual meetings, and establish clear guidelines to ensure that information flows seamlessly within the team.'
      },
      
    ],
    'Critical Thinking': [
      {
        question: 'How do you approach making decisions when faced with incomplete information?',
        answer: 'I assess the available information, identify key gaps, and make informed decisions by considering potential risks and seeking additional insights when necessary.'
      },
      {
        question: 'Can you provide an example of a challenging problem you solved through critical thinking?',
        answer: 'Certainly, in a previous role, I encountered a complex issue with a project timeline. Through critical analysis and collaboration with the team, we identified alternative solutions and successfully met the deadline.'
      },
      {
        question: 'How do you evaluate the credibility of information sources when researching a topic?',
        answer: 'I cross-reference information from multiple reliable sources, assess the authority and expertise of authors, and consider the publication date to ensure the information is up-to-date.'
      },
      {
        question: 'Describe a situation where you had to reevaluate your initial assumptions. How did you adapt your approach?',
        answer: 'In a project, I initially assumed a certain strategy would be most effective. As new data emerged, I reassessed my assumptions, adjusted the strategy, and ultimately achieved better results.'
      },
      {
        question: 'How do you encourage a culture of critical thinking within your team?',
        answer: 'I foster an environment where team members feel comfortable questioning assumptions, encourage open dialogue, and recognize and reward thoughtful analysis and problem-solving.'
      },
      // Add more questions here if needed
    ],
    
    'Adaptability in Work': [
      {
        question: 'Describe a situation where you had to quickly adapt to unexpected changes in a project. How did you handle it?',
        answer: 'In a previous project, there was a sudden change in requirements. I quickly reassessed priorities, communicated effectively with the team, and adjusted our approach to meet the new project demands.'
      },
      {
        question: 'How do you stay organized and focused in a dynamic work environment with frequent changes?',
        answer: 'I prioritize tasks based on urgency and importance, regularly reassess project timelines, and maintain a flexible mindset to adapt to evolving circumstances.'
      },
      {
        question: 'Can you provide an example of a time when you successfully embraced change and innovation in your work?',
        answer: 'Certainly, in a role where a new technology was introduced, I actively sought training, collaborated with team members, and successfully integrated the new technology into our workflow.'
      },
      {
        question: 'How do you handle uncertainty and ambiguity in your role?',
        answer: 'I embrace uncertainty as an opportunity for learning and growth. I break down complex problems into manageable steps and remain adaptable, adjusting my approach as needed.'
      },
      {
        question: 'What strategies do you use to help your team navigate and embrace change?',
        answer: 'I communicate transparently about changes, provide support and resources, and encourage a positive mindset toward change by highlighting potential benefits and opportunities.'
      },
      // Add more questions here if needed
    ],
    'Time Management Skills': [
      {
        question: 'How do you prioritize tasks to ensure you meet deadlines?',
        answer: 'I use a combination of urgency and importance to prioritize tasks, creating a schedule that ensures timely completion of high-priority items while managing lower-priority tasks.'
      },
      {
        question: 'How do you handle situations where you have multiple competing deadlines?',
        answer: 'I assess the time required for each task, break them into manageable parts, and create a timeline. I communicate with stakeholders to manage expectations and ensure deadlines are met.'
      },
      {
        question: 'Can you provide an example of a time when you had to adjust your schedule to accommodate unexpected tasks?',
        answer: 'Certainly, in a project where urgent issues arose, I reprioritized my tasks, reallocated time, and successfully addressed the unexpected challenges without compromising other deadlines.'
      },
      {
        question: 'How do you avoid procrastination and maintain focus on your tasks?',
        answer: 'I set clear goals, break down tasks into smaller steps, and use techniques such as the Pomodoro Technique to maintain focus and avoid procrastination.'
      },
      {
        question: 'How do you assess the time required for a new project or task?',
        answer: 'I break down the project into its components, estimate the time required for each, and consider potential challenges. I also review similar past projects to inform my time estimates.'
      },
      // Add more questions here if needed
    ],
    
    'Leadership Qualities': [
      {
        question: 'How do you motivate your team and take responsibility for their results?',
        answer: 'I motivate my team through positive reinforcement, setting clear expectations, and leading by example. I take responsibility for the teams results by actively participating in their success and addressing challenges.'
      },
      {
        question: 'How do you develop and guide your team to achieve established objectives?',
        answer: 'I establish clear goals, provide guidance and support, and encourage open communication. Regular check-ins and feedback sessions ensure that the team is on track to achieve objectives.'
      },
      {
        question: 'How do you handle situations where problems or difficulties arise within the team?',
        answer: 'I address issues promptly, listen to concerns, and work collaboratively with the team to find solutions. Open communication and a proactive approach are essential in resolving challenges.'
      },
      {
        question: 'How do you develop effective delegation skills?',
        answer: 'I assess team members\' strengths, communicate expectations clearly, and provide the necessary support. Delegation is a collaborative process that empowers team members and enhances overall productivity.'
      },
      {
        question: 'How do you consistently improve your leadership skills?',
        answer: 'I actively seek feedback, participate in leadership development programs, and stay updated on industry best practices. Continuous improvement is a fundamental aspect of effective leadership.'
      },
      // Add more questions here if needed
    ],
    'Emotional Intelligence Awareness': [
      {
        question: 'How do you handle stressful situations while maintaining emotional composure?',
        answer: 'I practice mindfulness techniques, take deep breaths, and assess the situation objectively. This helps me respond thoughtfully rather than react emotionally.'
      },
      {
        question: 'How do you empathize with the emotions of your team members?',
        answer: 'I actively listen, seek to understand others perspectives, and validate their feelings. This creates a supportive and empathetic environment within the team.'
      },
      {
        question: 'Can you provide an example of a situation where you used emotional intelligence to resolve a conflict?',
        answer: 'Certainly, in a team dispute, I facilitated a conversation, acknowledged each persons emotions, and worked towards a resolution that considered everyone\'s feelings and concerns.'
      },
      {
        question: 'How do you adjust your communication style based on the emotional state of those you are interacting with?',
        answer: 'I adapt my communication style to be more supportive or direct based on the emotional cues of others. This ensures effective and empathetic communication.'
      },
      {
        question: 'How do you promote a positive emotional atmosphere within your team?',
        answer: 'I encourage open communication, celebrate achievements, and provide support during challenges. Creating a positive environment contributes to overall emotional well-being.'
      },
      // Add more questions here if needed
    ],
    
    'Conflict Resolution Skills': [
      {
        question: 'How do you approach resolving conflicts within a team?',
        answer: 'I address conflicts promptly, encourage open communication, and facilitate a constructive discussion to identify the root causes and find mutually agreeable solutions.'
      },
      {
        question: 'Can you describe a time when you successfully mediated a conflict between team members?',
        answer: 'Certainly, I facilitated a discussion between team members with differing opinions, helping them understand each other\'s perspectives and find common ground for resolution.'
      },
      {
        question: 'How do you prevent conflicts from escalating within a team?',
        answer: 'I proactively address potential issues, encourage transparent communication, and establish clear expectations to prevent misunderstandings that may lead to conflicts.'
      },
      {
        question: 'How do you handle conflicts where emotions are running high?',
        answer: 'I remain calm, listen actively, and validate emotions to de-escalate the situation. Once emotions are addressed, the focus can shift towards finding a constructive resolution.'
      },
      {
        question: 'How do you ensure that conflicts are resolved in a fair and unbiased manner?',
        answer: 'I approach conflicts with impartiality, consider all perspectives, and ensure that decisions are based on facts and the best interests of the team.'
      },
      // Add more questions here if needed
    ],
    
    'Creative Thinking Abilities': [
      {
        question: 'How do you encourage creativity and innovation within your team?',
        answer: 'I create an environment that values diverse ideas, encourages brainstorming sessions, and rewards innovative thinking. This fosters a culture of creativity within the team.'
      },
      {
        question: 'Can you provide an example of a time when you implemented a creative solution to a challenging problem?',
        answer: 'Certainly, in a project with tight constraints, I encouraged the team to think outside the box, leading to a creative solution that exceeded expectations.'
      },
      {
        question: 'How do you overcome creative blocks and inspire your team to think creatively?',
        answer: 'I promote a collaborative and supportive atmosphere, encourage breaks to refresh the mind, and use creative thinking exercises to stimulate innovative ideas.'
      },
      {
        question: 'How do you balance the need for creativity with the practical constraints of a project?',
        answer: 'I assess project requirements, identify areas where creative solutions can add value, and balance innovation with practical considerations to achieve successful outcomes.'
      },
      {
        question: 'How do you foster a culture that embraces experimentation and learning from failure?',
        answer: 'I communicate that failure is an opportunity for learning, celebrate experimentation, and ensure that team members feel supported in taking creative risks.'
      },
      // Add more questions here if needed
    ],
}
let selectedTags = [];
let currentQuestionIndex = 0;
let currentTagIndex = 0;
let userAnswers = [];

function handleCheckboxSelection() {
  var checkboxes = document.getElementsByName("tag");
  var selectedCount = 0;
  selectedTags = [];

  for (var i = 0; i < checkboxes.length; i++) {
      if (checkboxes[i].checked && !checkboxes[i].disabled) {
          selectedCount++;
          selectedTags.push(checkboxes[i].value);
      }
  }

  if (selectedCount >= 4) {
      for (var i = 0; i < checkboxes.length; i++) {
          if (!checkboxes[i].checked) {
              checkboxes[i].disabled = true;
          }
      }
  } else {
      for (var i = 0; i < checkboxes.length; i++) {
          checkboxes[i].disabled = false;
      }
  }
}

function generateQuiz() {
  const form = document.getElementById('tag-form');
  selectedTags = Array.from(form.elements['tag']).filter(tag => tag.checked).map(tag => tag.value);

  if (selectedTags.length != 4) {
    alert("Please select exactly 4 tags.");
    return null;
  }

  form.style.display = 'none'; // Ascunde formularul de tag-uri

  currentTagIndex = 0;
  currentQuestionIndex = 0;
  userAnswers = [];
  displayQuestion();
}

function createQuestionElement(questionData, isLastQuestion) {
  const questionElement = document.createElement('div');
  questionElement.className = 'question';

  // Create an input for the user's answer
  const answerInput = document.createElement('textarea');
  answerInput.className = 'answer-input';
  answerInput.setAttribute('rows', '4'); // Adjust the number of rows to make it longer
  answerInput.setAttribute('placeholder', 'Type your answer here...');

  // Create the submit button
  const submitButton = document.createElement('button');
  submitButton.textContent = isLastQuestion ? 'Finish Quiz' : 'Submit Answer';
  submitButton.className = 'submit-button';
  submitButton.addEventListener('click', () => {
      // Verify that the answer is not empty
      if (answerInput.value.trim() === '') {
          alert('Please type your answer before submitting.');
          return;
      }
      // Call the submitAnswer function with the answer data
      submitAnswer({
          question: questionData.question,
          answer: answerInput.value.trim(),
          isLastQuestion: isLastQuestion
      });
  });

  // Append the answer input and submit button to the question element
  questionElement.appendChild(answerInput);
  questionElement.appendChild(submitButton);

  // Apply custom CSS styles to the answer input
  answerInput.style.width = '750px'; // Make the input box full width
  answerInput.style.padding = '10px'; // Add padding for better appearance
  answerInput.style.border = '1px solid #ccc'; // Add a border
  answerInput.style.borderRadius = '5px'; // Add rounded corners

  return questionElement;
}
function submitAnswer(answerData) {
  // Extract the answer string from the answerData object
  const userAnswer = answerData.answer.trim();

  // Check if the user's answer is empty
  if (userAnswer === '') {
      alert('Please type your answer before submitting.');
      return;
  }

  // Save the user's answer
  userAnswers.push({
      tag: selectedTags[currentTagIndex],
      question: questions[selectedTags[currentTagIndex]][currentQuestionIndex].question,
      answer: userAnswer  // Use the trimmed answer
  });

  // Check if there are more questions in the current category
  if (currentQuestionIndex < questions[selectedTags[currentTagIndex]].length - 1) {
      // Move to the next question
      currentQuestionIndex++;
  } else if (currentTagIndex < selectedTags.length - 1) {
      // Move to the next category of questions
      currentTagIndex++;
      currentQuestionIndex = 0; // Reset the question index for the new category
  } else {
      // All categories and questions are completed
      showReview();
      return;
  }

  // Display the next question
  displayQuestion();
}
function updateTitleForReview() {
  const questionTitle = document.getElementById('question-title');
  questionTitle.textContent = 'Review Interview';
}
function getCorrectAnswer(tag, question) {
  // Verificăm dacă există întrebări pentru tag-ul dat
  if (questions.hasOwnProperty(tag)) {
      // Căutăm întrebarea corespunzătoare
      const correctQuestion = questions[tag].find(q => q.question === question);
      if (correctQuestion) {
          // Returnăm răspunsul corect
          return correctQuestion.answer;
      }
  }
  // Dacă nu găsim o întrebare sau tag-ul nu există, returnăm un mesaj corespunzător
  return 'No correct answer available for this question.';
}

function showReview() {
  updateTitleForReview();
  const reviewContainer = document.getElementById('review-container');

  userAnswers.forEach(answer => {
      const answerElement = document.createElement('div');
      answerElement.className = 'review-answer';

      const questionText = document.createElement('p');
      questionText.innerHTML = `<strong>${answer.tag} - ${answer.question}</strong>`;
      answerElement.appendChild(questionText);

      const userResponse = document.createElement('p');
      userResponse.textContent = `Your Answer: ${answer.answer || 'No answer provided'}`;
      answerElement.appendChild(userResponse);

      // Aici adăugăm răspunsurile corecte la întrebări
      const correctAnswer = getCorrectAnswer(answer.tag, answer.question);
      const correctResponse = document.createElement('p');
      correctResponse.textContent = `Possible answer: ${correctAnswer || 'No correct answer available'}`;
      answerElement.appendChild(correctResponse);

      reviewContainer.appendChild(answerElement);
  });

  reviewContainer.style.display = 'block';
  document.getElementById('quiz-container').style.display = 'none';
}

function displayQuestion() {
  // Check if there are selected tags and if the current indices are within bounds
  if (selectedTags.length === 0 || currentTagIndex >= selectedTags.length) {
      alert('No tags selected or index out of bounds');
      return;
  }

  const currentTag = selectedTags[currentTagIndex];
  const questionList = questions[currentTag];
  
  if (currentQuestionIndex >= questionList.length) {
      alert('Index out of bounds for current tag');
      return;
  }

  // Retrieve the current question data
  const questionData = questionList[currentQuestionIndex];
  
  // Update the title with the current question
  const questionTitleElement = document.getElementById('question-title');
  questionTitleElement.textContent = questionData.question;

  // Create or update the question and answer elements
  const quizContainer = document.getElementById('quiz-container');
  const isLastQuestion = currentQuestionIndex === questionList.length - 1 && currentTagIndex === selectedTags.length - 1;

  // Clear the existing content
  quizContainer.innerHTML = '';

  // Add the new question element
  quizContainer.appendChild(createQuestionElement(questionData, isLastQuestion));
}

// Adăugați event listener pentru butonul de generare a quiz-ului
document.getElementById('generate-quiz-button').addEventListener('click', generateQuiz);

document.getElementById('restart-button').addEventListener('click', redirectToMainPage);
function redirectToMainPage() {
// Redirecționează utilizatorul către pagina principală
window.location.href = 'soft-skills-quiz.html'; // Înlocuiește 'pagina-principala.html' cu URL-ul real al paginii principale
}


document.getElementById('back').addEventListener('click', redirect);
function redirect() {
// Redirecționează utilizatorul către pagina principală
window.location.href = 'dashboard.html'; // Înlocuiește 'pagina-principala.html' cu URL-ul real al paginii principale
}